<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Cho thuê - FU Car</title>
  <link rel="stylesheet" th:href="@{/css/home.css}" />
  <link rel="stylesheet" th:href="@{/font/font-awesome-pro-v6-6.2.0/css/all.min.css}" />
</head>
<body>
  <div th:insert="fragments/header :: site-header"></div>
  <main class="site-main container">
    <div class="container-inner">
      <h1>Cho thuê</h1>
      <p>Trang placeholder cho chức năng cho thuê.</p>
      <div th:if="${currentUser}">
        <h3>Xin chào, <span th:text="${currentUser.customerName}"></span></h3>
        <p>Email: <span th:text="${currentUser.email}"></span></p>

        <section class="featured-cars fade-in">
          <h2>Xe khả dụng</h2>
          <div class="car-grid">
            <div class="car-card" th:each="car : ${availableCars}">
              <img th:src="${car.imageUrl} ? @{${car.imageUrl}} : @{/img/car-placeholder.svg}" th:alt="${car.carName}" />
              <div class="card-body">
                <h3 th:text="${car.carName}"></h3>
                <div class="price" th:text="${#numbers.formatDecimal(car.rentPrice, 0, 'COMMA', 0, 'POINT')} + ' VND/ngày'"></div>
                <p th:text="${car.carModelYear} + ' • ' + ${car.color} + ' • ' + ${car.capacity} + ' chỗ'"/>
                <div style="margin-top:12px;display:flex;gap:8px;justify-content:center">
                  <a th:href="@{'/rent/book/' + ${car.carId}}" class="btn btn-primary">Thuê</a>
                  <a th:href="@{'/cars/' + ${car.carId}}" class="btn btn-secondary">Chi tiết</a>
                </div>
              </div>
            </div>
          </div>
        </section>

        <nav class="pagination" th:if="${totalPages} &gt; 1" aria-label="Car pages" style="margin-top:18px;text-align:center">
          <a th:if="${currentPage} &gt; 0" th:href="@{'/rent?page=' + (${currentPage} - 1) + '&size=' + ${pageSize}}" class="btn">« Trước</a>
          <span th:each="i : ${#numbers.sequence(0, totalPages - 1)}">
            <a th:href="@{'/rent?page=' + ${i} + '&size=' + ${pageSize}}" th:text="${i + 1}"
               th:classappend="${i} == ${currentPage} ? ' btn-primary' : ' btn-secondary'" style="margin:0 6px;padding:8px 12px;border-radius:6px;text-decoration:none;color:inherit"></a>
          </span>
          <a th:if="${currentPage} &lt; ${totalPages} - 1" th:href="@{'/rent?page=' + (${currentPage} + 1) + '&size=' + ${pageSize}}" class="btn">Tiếp »</a>
        </nav>
      </div>
      <!-- show auth-required overlay when not logged in -->
      <div th:insert="fragments/auth-required :: auth-required"></div>
    </div>
  </main>
  <div th:insert="fragments/footer :: site-footer"></div>
  <div th:insert="~{fragments/auth-modal :: auth-modal}"></div>
  <script th:src="@{/js/auth.js}"></script>
</body>
</html>
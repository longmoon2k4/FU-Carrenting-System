<!DOCTYPE html>
<!-- Header fragment -->
<div th:fragment="site-header">
    <!-- Ensure Font Awesome is available on pages that include this fragment -->
    <link rel="stylesheet" th:href="@{/font/font-awesome-pro-v6-6.2.0/css/all.min.css}" />
    <header class="site-header">
        <div class="header-top">
            <div class="container header-flex">
                <div class="header-left">
                    <a href="/" class="header-logo-link">
                        <img src="/img/white.png" alt="FU Car Renting" class="header-logo" />
                    </a>
                    <div class="header-project-name">FU Car Renting System</div>
                </div>
                <nav class="header-nav" aria-label="Main navigation">
                    <a class="nav-item" href="/">Trang chủ</a>
                    <a class="nav-item" href="/rent">Thuê xe</a>
                    <a class="nav-item" href="/return">Trả xe</a>
                    <!-- <a class="nav-item" href="/wallet">Nạp tiền</a> -->
                    <a class="nav-item" href="/support">Hỗ trợ</a>
                </nav>
                <!-- search + filter -->
                <div class="header-search-wrapper">
                    <form class="header-search" action="/cars" method="get">
                        <button type="submit" class="search-btn" aria-label="Tìm kiếm"><i class="fa-solid fa-magnifying-glass"></i></button>
                        <input type="search" name="q" class="search-input" placeholder="Tìm kiếm xe theo tên hoặc mô tả..." />
                        <button type="button" class="filter-toggle" aria-label="Lọc"><i class="fa-solid fa-filter"></i></button>
                    </form>
                    <div class="search-filter-panel" aria-hidden="true">
                        <form class="filter-form" action="/cars" method="get">
                            <input type="hidden" name="q" />
                            <div class="filter-row">
                                <label>Hãng</label>
                                <select name="producerId">
                                    <option value="">Tất cả</option>
                                    <!-- populate with producers in controller -->
                                </select>
                            </div>
                            <div class="filter-row">
                                <label>Màu</label>
                                <input name="color" type="text" placeholder="Ví dụ: Đỏ, Trắng" />
                            </div>
                            <div class="filter-row">
                                <label>Năm</label>
                                <input name="modelYear" type="number" min="1900" max="2100" />
                            </div>
                            <div class="filter-row">
                                <label>Sức chứa</label>
                                <input name="capacity" type="number" min="1" />
                            </div>
                            <div class="filter-row">
                                <label>Khoảng giá</label>
                                <input name="minPrice" type="number" placeholder="Từ" />
                                <input name="maxPrice" type="number" placeholder="Đến" />
                            </div>
                            <div class="filter-actions">
                                <button type="submit" class="btn btn-primary">Áp dụng</button>
                                <button type="button" class="btn btn-secondary filter-close">Đóng</button>
                            </div>
                        </form>
                    </div>
                </div>
                <ul class="header-middle-right">
                    <li class="header-middle-right-item dropdown">
                        <i class="fa-light fa-user header-user-icon" aria-hidden="true"></i>
                        <div class="auth-container">
                            <!-- small line (email) -->
                            <span class="text-dndk" th:text="${currentUserEmail} ?: 'Đăng nhập / Đăng ký'">Đăng nhập / Đăng ký</span>
                            <!-- main line (customer name). keep caret icon for dropdown -->
                            <span class="text-tk" th:utext="${currentUserName} != null ? ${#strings.escapeXml(currentUserName)} + ' <i class=\'fa-sharp fa-solid fa-caret-down\'></i>' : 'Tài khoản <i class=\'fa-sharp fa-solid fa-caret-down\'></i>'">Tài khoản <i class="fa-sharp fa-solid fa-caret-down"></i></span>
                        </div>
                        <ul class="header-middle-right-menu">
                            <li><a id="login" href="#" data-auth="login"><i class="fa-light fa-right-to-bracket"></i> Đăng nhập</a></li>
                            <li><a id="signup" href="#" data-auth="register"><i class="fa-light fa-user-plus"></i> Đăng ký</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </header>
</div>


<script th:src="@{/js/auth.js}"></script>
